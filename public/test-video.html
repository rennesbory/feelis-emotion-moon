<!DOCTYPE html>
<html>
<head>
    <title>Video Test - Comprehensive</title>
    <style>
        body { font-family: system-ui, sans-serif; margin: 20px; background: #f5f5f5; }
        .video-container { display: inline-block; margin: 10px; background: white; padding: 15px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
        video { width: 200px; border-radius: 8px; }
        .status { font-size: 12px; margin-top: 5px; }
        .success { color: green; }
        .error { color: red; }
        .loading { color: orange; }
        h1 { color: #333; }
        .summary { background: white; padding: 15px; border-radius: 10px; margin-bottom: 20px; }
    </style>
</head>
<body>
    <h1>Feelis Video Loading Test</h1>
    
    <div class="summary">
        <h2>Test Results Summary</h2>
        <div id="summary">Loading tests...</div>
    </div>
    
    <h2>Hero Video</h2>
    <div class="video-container">
        <video id="hero" controls muted>
            <source src="/videos/emoly_intro_trim.mp4" type="video/mp4">
        </video>
        <div class="status" id="hero-status">Loading...</div>
    </div>
    
    <h2>Gallery Videos</h2>
    <div id="gallery-videos"></div>
    
    <script>
        const galleryVideos = [
            'web_Animation_background_angry.mp4',
            'web_Animation_background_anxious.mp4',
            'web_Animation_background_calm.mp4',
            'web_Animation_background_empty.mp4',
            'web_Animation_background_excited.mp4',
            'web_Animation_background_grateful.mp4',
            'web_Animation_background_happy.mp4',
            'web_Animation_background_sad.mp4',
            'web_Animation_background_tired.mp4'
        ];

        let testResults = {
            hero: { status: 'loading', error: null },
            gallery: {}
        };

        function updateSummary() {
            const heroStatus = testResults.hero.status;
            const galleryResults = Object.values(testResults.gallery);
            const gallerySuccess = galleryResults.filter(r => r.status === 'success').length;
            const galleryTotal = galleryResults.length;
            const galleryErrors = galleryResults.filter(r => r.status === 'error').length;
            
            document.getElementById('summary').innerHTML = `
                <p><strong>Hero Video:</strong> ${heroStatus}</p>
                <p><strong>Gallery Videos:</strong> ${gallerySuccess}/${galleryTotal} successful, ${galleryErrors} errors</p>
                <p><strong>Overall:</strong> ${heroStatus === 'success' && galleryErrors === 0 ? '‚úÖ All videos working' : '‚ùå Some videos failed'}</p>
            `;
        }

        function testVideo(videoElement, videoName, isHero = false) {
            const statusElement = document.getElementById(`${videoName}-status`);
            
            videoElement.onloadeddata = () => {
                console.log(`‚úÖ ${videoName} loaded successfully`);
                statusElement.textContent = '‚úÖ Loaded successfully';
                statusElement.className = 'status success';
                
                if (isHero) {
                    testResults.hero = { status: 'success', error: null };
                } else {
                    testResults.gallery[videoName] = { status: 'success', error: null };
                }
                updateSummary();
            };
            
            videoElement.onerror = (error) => {
                console.error(`‚ùå ${videoName} failed to load:`, error);
                statusElement.textContent = `‚ùå Failed to load: ${videoElement.error?.code || 'Unknown error'}`;
                statusElement.className = 'status error';
                
                if (isHero) {
                    testResults.hero = { status: 'error', error: videoElement.error };
                } else {
                    testResults.gallery[videoName] = { status: 'error', error: videoElement.error };
                }
                updateSummary();
            };
            
            videoElement.oncanplay = () => {
                console.log(`üìπ ${videoName} can play`);
            };
        }

        // Test hero video
        const heroVideo = document.getElementById('hero');
        testVideo(heroVideo, 'hero', true);

        // Create and test gallery videos
        const galleryContainer = document.getElementById('gallery-videos');
        galleryVideos.forEach(videoName => {
            const container = document.createElement('div');
            container.className = 'video-container';
            
            const video = document.createElement('video');
            video.controls = true;
            video.muted = true;
            video.style.width = '150px';
            
            const source = document.createElement('source');
            source.src = `/videos/${videoName}`;
            source.type = 'video/mp4';
            video.appendChild(source);
            
            const status = document.createElement('div');
            status.className = 'status loading';
            status.id = `${videoName}-status`;
            status.textContent = 'Loading...';
            
            const title = document.createElement('div');
            title.textContent = videoName.replace('web_Animation_background_', '').replace('.mp4', '');
            title.style.fontWeight = 'bold';
            title.style.marginBottom = '5px';
            
            container.appendChild(title);
            container.appendChild(video);
            container.appendChild(status);
            galleryContainer.appendChild(container);
            
            testResults.gallery[videoName] = { status: 'loading', error: null };
            testVideo(video, videoName);
        });

        // Initial summary update
        updateSummary();
        
        // Console logging for debugging
        console.log('Video test page loaded');
        console.log('Testing hero video:', '/videos/emoly_intro_trim.mp4');
        console.log('Testing gallery videos:', galleryVideos.map(v => `/videos/${v}`));
        
        // Test network accessibility
        fetch('/videos/emoly_intro_trim.mp4', { method: 'HEAD' })
            .then(response => {
                console.log('Hero video fetch test:', response.status);
            })
            .catch(error => {
                console.error('Hero video fetch failed:', error);
            });
    </script>
</body>
</html>